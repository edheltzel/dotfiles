var X=Object.create;var T=Object.defineProperty;var ee=Object.getOwnPropertyDescriptor;var te=Object.getOwnPropertyNames;var ie=Object.getPrototypeOf,re=Object.prototype.hasOwnProperty;var Y=e=>T(e,"__esModule",{value:!0});var oe=(e,i)=>()=>(i||e((i={exports:{}}).exports,i),i.exports),ne=(e,i)=>{for(var r in i)T(e,r,{get:i[r],enumerable:!0})},Z=(e,i,r,l)=>{if(i&&typeof i=="object"||typeof i=="function")for(let a of te(i))!re.call(e,a)&&(r||a!=="default")&&T(e,a,{get:()=>i[a],enumerable:!(l=ee(i,a))||l.enumerable});return e},se=(e,i)=>Z(Y(T(e!=null?X(ie(e)):{},"default",!i&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),ae=(e=>(i,r)=>e&&e.get(i)||(r=Z(Y({}),i,1),e&&e.set(i,r),r))(typeof WeakMap!="undefined"?new WeakMap:0);var W=oe((I,$)=>{(function(e,i){typeof I=="object"&&typeof $<"u"?$.exports=i():typeof define=="function"&&define.amd?define(i):(e=typeof globalThis<"u"?globalThis:e||self,e.filesize=i())})(I,function(){"use strict";var e=/^(b|B)$/,i={iec:{bits:["bit","Kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["bit","Kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},r={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]},l={floor:Math.floor,ceil:Math.ceil};function a(c){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=[],f=0,s,m,u,h,M,x,g,A,w,y,D,C,P,B,d,F,z,S,L,O,b;if(isNaN(c))throw new TypeError("Invalid number");if(u=n.bits===!0,d=n.unix===!0,C=n.pad===!0,m=n.base||10,P=n.round!==void 0?n.round:d?1:2,g=n.locale!==void 0?n.locale:"",A=n.localeOptions||{},F=n.separator!==void 0?n.separator:"",z=n.spacer!==void 0?n.spacer:d?"":" ",L=n.symbols||{},S=m===2?n.standard||"iec":"jedec",D=n.output||"string",M=n.fullform===!0,x=n.fullforms instanceof Array?n.fullforms:[],s=n.exponent!==void 0?n.exponent:-1,O=l[n.roundingMethod]||Math.round,y=Number(c),w=y<0,h=m>2?1e3:1024,b=isNaN(n.precision)===!1?parseInt(n.precision,10):0,w&&(y=-y),(s===-1||isNaN(s))&&(s=Math.floor(Math.log(y)/Math.log(h)),s<0&&(s=0)),s>8&&(b>0&&(b+=8-s),s=8),D==="exponent")return s;if(y===0)o[0]=0,B=o[1]=d?"":i[S][u?"bits":"bytes"][s];else{f=y/(m===2?Math.pow(2,s*10):Math.pow(1e3,s)),u&&(f=f*8,f>=h&&s<8&&(f=f/h,s++));var N=Math.pow(10,s>0?P:0);o[0]=O(f*N)/N,o[0]===h&&s<8&&n.exponent===void 0&&(o[0]=1,s++),B=o[1]=m===10&&s===1?u?"kbit":"kB":i[S][u?"bits":"bytes"][s],d&&(o[1]=o[1].charAt(0),e.test(o[1])&&(o[0]=Math.floor(o[0]),o[1]=""))}if(w&&(o[0]=-o[0]),b>0&&(o[0]=o[0].toPrecision(b)),o[1]=L[o[1]]||o[1],g===!0?o[0]=o[0].toLocaleString():g.length>0?o[0]=o[0].toLocaleString(g,A):F.length>0&&(o[0]=o[0].toString().replace(".",F)),C&&Number.isInteger(o[0])===!1&&P>0){var E=F||".",j=o[0].toString().split(E),G=j[1]||"",K=G.length,Q=P-K;o[0]="".concat(j[0]).concat(E).concat(G.padEnd(K+Q,"0"))}return M&&(o[1]=x[s]?x[s]:r[S][s]+(u?"bit":"byte")+(o[0]===1?"":"s")),D==="array"?o:D==="object"?{value:o[0],symbol:o[1],exponent:s,unit:B}:o.join(z)}return a.partial=function(c){return function(n){return a(n,c)}},a})});var ye={};ne(ye,{default:()=>J});var t=require("@raycast/api"),R=require("node:util"),U=require("node:child_process"),V=se(W()),p=require("node:fs"),_=require("node:path"),q=require("node:os"),me=(0,R.promisify)(U.exec);function H(){let{startDirectory:e}=(0,t.getPreferenceValues)();return e=e.replace("~",(0,q.homedir)()),(0,_.resolve)(e)}function ce(e){let i=(0,t.getPreferenceValues)(),r=`${e.fileData.path}/${e.fileData.name}`;return _jsx(t.List.Item,{id:r,title:e.fileData.name,subtitle:i.showFilePermissions?e.fileData.permissions:"",icon:{fileIcon:r},actions:_jsx(t.ActionPanel,null,_jsx(t.PushAction,{title:"Open Directory",icon:t.Icon.ArrowRight,target:_jsx(k,{path:r})}),_jsx(t.ShowInFinderAction,{path:r}),_jsx(t.CopyToClipboardAction,{title:"Copy Directory Path",content:`${r}/`,shortcut:{modifiers:["cmd","shift"],key:"c"}}))})}function le(e){let i=(0,t.getPreferenceValues)(),r=`${e.fileData.path}/${e.fileData.name}`;return _jsx(t.List.Item,{key:r,id:r,title:e.fileData.name,icon:{fileIcon:r},subtitle:i.showFilePermissions?e.fileData.permissions:"",accessoryTitle:i.showFileSize?(0,V.default)(e.fileData.size,{round:0,roundingMethod:"floor",spacer:""}):"",actions:_jsx(t.ActionPanel,null,_jsx(t.OpenAction,{title:"Open File",target:r}),_jsx(t.ShowInFinderAction,{path:r}),_jsx(t.OpenWithAction,{path:r,shortcut:{modifiers:["cmd"],key:"o"}}),_jsx(t.CopyToClipboardAction,{title:"Copy File Path",content:r,shortcut:{modifiers:["opt","shift"],key:"c"}}))})}function fe(e){let i=(0,t.getPreferenceValues)(),r=`${e.fileData.path}/${e.fileData.name}`,l=(0,p.readlinkSync)(r),a=l.startsWith("/")?l:`${e.fileData.path}/${l}`;return(0,p.lstatSync)(a).isDirectory()?_jsx(t.List.Item,{id:r,title:e.fileData.name,icon:{fileIcon:r},subtitle:i.showFilePermissions?e.fileData.permissions:"",actions:_jsx(t.ActionPanel,null,_jsx(t.PushAction,{title:"Open Symlink Directory",icon:t.Icon.ArrowRight,target:_jsx(k,{path:a})}),_jsx(t.OpenWithAction,{path:r,shortcut:{modifiers:["cmd"],key:"o"}}),_jsx(t.CopyToClipboardAction,{title:"Copy Symlink Path",content:r,shortcut:{modifiers:["cmd","shift"],key:"c"}}),_jsx(t.CopyToClipboardAction,{title:"Copy Original Directory Path",content:r,shortcut:{modifiers:["cmd","opt"],key:"c"}}))}):_jsx(t.List.Item,{id:r,title:e.fileData.name,icon:{fileIcon:r},subtitle:i.showFilePermissions?e.fileData.permissions:"",actions:_jsx(t.ActionPanel,null,_jsx(t.OpenAction,{title:"Open File",target:a}),_jsx(t.OpenWithAction,{path:r,shortcut:{modifiers:["cmd"],key:"o"}}),_jsx(t.CopyToClipboardAction,{title:"Copy Symlink Path",content:r,shortcut:{modifiers:["cmd","shift"],key:"c"}}),_jsx(t.CopyToClipboardAction,{title:"Copy Original File Path",content:a,shortcut:{modifiers:["cmd","opt"],key:"c"}}))})}function v(e){let i=`${e.path}/${e.name}`;if(e.type==="directory")return _jsx(ce,{fileData:e,key:i});if(e.type==="file")return _jsx(le,{fileData:e,key:i});if(e.type==="symlink")return _jsx(fe,{fileData:e,key:i});(0,t.showToast)(t.ToastStyle.Failure,"Unsupported file type",`File type: ${e.type}`)}function pe(e){let i=(0,t.getPreferenceValues)(),r=(0,p.readdirSync)(e);i.showDots||(r=r.filter(a=>!a.startsWith("."))),i.caseSensitive||(r=r.sort((a,c)=>a.toLowerCase()<c.toLowerCase()?-1:a.toLowerCase()>c.toLowerCase()?1:0));let l=[];for(let a of r){let c=(0,p.lstatSync)(`${e}/${a}`),n="other";c.isDirectory()&&(n="directory"),c.isFile()&&(n="file"),c.isSymbolicLink()&&(n="symlink");let o=(c.mode&parseInt("777",8)).toString(8),f=c.size,s={type:n,name:a,size:f,permissions:o,path:e};l.push(s)}return l}function k(e){if(!(0,p.existsSync)(e.path))return _jsx(t.Detail,{markdown:`# Error: 

The directory \`${e.path}\` does not exist. `});let i=pe(e.path);if((0,t.getPreferenceValues)().directoriesFirst){let l=i.filter(c=>c.type==="directory"),a=i.filter(c=>c.type!=="directory");return _jsx(t.List,{searchBarPlaceholder:`Search in ${e.path}/`},_jsx(t.List.Section,{title:"Directories"},l.map(c=>v(c))),_jsx(t.List.Section,{title:"Files"},a.map(c=>v(c))))}else return _jsx(t.List,{searchBarPlaceholder:`Search in ${e.path}/`},i.map(l=>v(l)))}function J(){return _jsx(k,{path:H()})}module.exports=ae(ye);0&&(module.exports={});
/**
 * filesize
 *
 * @copyright 2021 Jason Mulligan <jason.mulligan@avoidwork.com>
 * @license BSD-3-Clause
 * @version 8.0.6
 */
